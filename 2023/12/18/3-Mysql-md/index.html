<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>3.Mysql.md | 王斐的博客</title><meta name="author" content="王斐"><meta name="copyright" content="王斐"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySql1. 执行 select 语句都发生了什么？ 连接器：通过TCP三次握手建立连接，管理连接、校验用户身份；  查询缓存：查询语句如果命中查询缓存则直接返回，否则继续往下执行。MySQL 8.0 已删除该模块；  解析 SQL，通过解析器对 SQL 查询语句进行词法分析、语法分析，然后构建语法树，方便后续模块读取表名、字段、语句类型；  执行 SQL：执行 SQL 共有三个阶段：    预">
<meta property="og:type" content="article">
<meta property="og:title" content="3.Mysql.md">
<meta property="og:url" content="https://wangfei0928.github.io/oldArtist.github.io/2023/12/18/3-Mysql-md/index.html">
<meta property="og:site_name" content="王斐的博客">
<meta property="og:description" content="MySql1. 执行 select 语句都发生了什么？ 连接器：通过TCP三次握手建立连接，管理连接、校验用户身份；  查询缓存：查询语句如果命中查询缓存则直接返回，否则继续往下执行。MySQL 8.0 已删除该模块；  解析 SQL，通过解析器对 SQL 查询语句进行词法分析、语法分析，然后构建语法树，方便后续模块读取表名、字段、语句类型；  执行 SQL：执行 SQL 共有三个阶段：    预">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2023-12-18T13:02:16.000Z">
<meta property="article:modified_time" content="2023-12-18T13:03:00.769Z">
<meta property="article:author" content="王斐">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/oldArtist.github.io/img/favicon.png"><link rel="canonical" href="https://wangfei0928.github.io/oldArtist.github.io/2023/12/18/3-Mysql-md/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/oldArtist.github.io/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/oldArtist.github.io/',
  algolia: undefined,
  localSearch: {"path":"/oldArtist.github.io/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '3.Mysql.md',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-18 21:03:00'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/oldArtist.github.io/archives/"><div class="headline">Articles</div><div class="length-num">2</div></a><a href="/oldArtist.github.io/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/oldArtist.github.io/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/oldArtist.github.io/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/oldArtist.github.io/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/oldArtist.github.io/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/oldArtist.github.io/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/oldArtist.github.io/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/oldArtist.github.io/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/oldArtist.github.io/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/oldArtist.github.io/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/oldArtist.github.io/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/oldArtist.github.io/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/oldArtist.github.io/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/oldArtist.github.io/" title="王斐的博客"><span class="site-name">王斐的博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/oldArtist.github.io/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/oldArtist.github.io/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/oldArtist.github.io/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/oldArtist.github.io/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/oldArtist.github.io/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/oldArtist.github.io/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/oldArtist.github.io/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/oldArtist.github.io/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/oldArtist.github.io/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/oldArtist.github.io/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/oldArtist.github.io/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">3.Mysql.md</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-18T13:02:16.000Z" title="Created 2023-12-18 21:02:16">2023-12-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-12-18T13:03:00.769Z" title="Updated 2023-12-18 21:03:00">2023-12-18</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="3.Mysql.md"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="MySql"><a href="#MySql" class="headerlink" title="MySql"></a>MySql</h1><h2 id="1-执行-select-语句都发生了什么？"><a href="#1-执行-select-语句都发生了什么？" class="headerlink" title="1. 执行 select 语句都发生了什么？"></a>1. 执行 select 语句都发生了什么？</h2><ol>
<li><p>连接器：通过TCP三次握手建立连接，管理连接、校验用户身份；</p>
</li>
<li><p>查询缓存：查询语句如果命中查询缓存则直接返回，否则继续往下执行。MySQL 8.0 已删除该模块；</p>
</li>
<li><p>解析 SQL，通过解析器对 SQL 查询语句进行词法分析、语法分析，然后构建语法树，方便后续模块读取表名、字段、语句类型；</p>
</li>
<li><p>执行 SQL：执行 SQL 共有三个阶段：</p>
</li>
</ol>
<ul>
<li>预处理阶段：检查表或字段是否存在；将 <code>select *</code> 中的 <code>*</code> 符号扩展为表上的所有列。</li>
<li>优化阶段：基于查询成本的考虑， 选择查询成本最小的执行计划；</li>
<li>执行阶段：根据执行计划执行 SQL 查询语句，从存储引擎读取记录，返回给客户端；</li>
</ul>
<h2 id="2-MySQL-的数据存放在哪？"><a href="#2-MySQL-的数据存放在哪？" class="headerlink" title="2. MySQL 的数据存放在哪？"></a>2. MySQL 的数据存放在哪？</h2><p>InnoDB引擎：</p>
<p>*.opt，用来存储当前数据库的默认字符集和字符校验规则。</p>
<p>*.frm ，该文件是用来保存每个表的元数据信息的，主要包含表结构定义。</p>
<p>*.ibd，表数据会保存在这个文件，包括索引。</p>
<p>MyISAM引擎：</p>
<p>.frm：存储表的元数据信息，包含表结构的定义</p>
<p>.MYD: 表真是数据文件</p>
<p>.MYI: 索引文件</p>
<h2 id="3-MySQL的NULL值如何存放？"><a href="#3-MySQL的NULL值如何存放？" class="headerlink" title="3. MySQL的NULL值如何存放？"></a>3. MySQL的NULL值如何存放？</h2><p>MySQL的Compact行格式中会用NULL值列表来标记值为NULL的列，NULL 值并不会存储在行格式中的真实数据部分。</p>
<p>NULL值列表会占用 1 字节空间，当表中所有字段都定义成 NOT NULL，行格式中就不会有 NULL值列表，这样可节省 1 字节的空间。</p>
<h2 id="4-谈一谈MySQL索引"><a href="#4-谈一谈MySQL索引" class="headerlink" title="4.  谈一谈MySQL索引"></a>4.  谈一谈MySQL索引</h2><p>索引就相当于书的目录，帮助存储引擎快速获取数据，所以索引是以空间换时间的设计思想。索引是一种提高数据库查询效率的数据结构，一般存储在磁盘文件中，占用物理空间，但是如果索引过多，影响插入和删除效率。</p>
<p>索引有那些分类？</p>
<p>从数据结构分为，B+树索引、Hash索引、全文索引、R-Tree索引</p>
<ul>
<li><p>B+树索引：所有数据存储在叶子节点，复杂度为<code>O(logn)</code>，适合范围查询。</p>
</li>
<li><p>哈希索引:  适合等值查询，检索效率高，一次到位。</p>
</li>
<li><p>全文索引：<code>MyISAM</code>和<code>InnoDB</code>中都支持使用全文索引，一般在文本类型<code>char,text,varchar</code>类型上创建。</p>
</li>
<li><p><code>R-Tree</code>索引: 用来对<code>GIS</code>数据类型创建<code>SPATIAL</code>索引</p>
</li>
</ul>
<p>从物理存储分为：聚集索引和非聚集索引</p>
<ul>
<li>聚集索引就是以主键创建的索引，在叶子节点存储的是表中的数据。</li>
<li>非聚集索引就是以非主键创建的索引，在叶子节点存储的是主键和索引列。</li>
</ul>
<p>从字段特性可以分为：</p>
<ul>
<li><p>主键索引：一种特殊的唯一索引，不允许有空值。</p>
</li>
<li><p>普通索引：<code>MySQL中</code>基本索引类型，允许空值和重复值。</p>
</li>
<li><p>联合索引：多个字段创建的索引，使用时遵循最左前缀原则。</p>
</li>
<li><p>唯一索引：索引列中的值必须是唯一的，但是允许为空值。</p>
</li>
</ul>
<p>从字段个数可以分为：</p>
<ul>
<li>单列索引</li>
<li>联合索引：通过将多个字段组合成一个索引，该索引就被称为联合索引</li>
</ul>
<h2 id="5-B树B-树"><a href="#5-B树B-树" class="headerlink" title="5. B树B+树"></a>5. B树B+树</h2><p>B+Tree 是一种多叉树，叶子节点才存放数据，非叶子节点只存放索引，而且每个节点里的数据是<strong>按主键顺序存放</strong>的。每一层父节点的索引值都会出现在下层子节点的索引值中，因此在叶子节点中，包括了所有的索引值信息，并且每一个叶子节点都有两个指针，分别指向下一个叶子节点和上一个叶子节点，形成一个双向链表。</p>
<p><strong>为什么不是一般二叉树？</strong></p>
<p>如果二叉树特殊化为一个链表，相当于全表扫描。平衡二叉树相比于二叉查找 树来说，查找效率更稳定，总体的查找速度也更快。</p>
<p><strong>为什么不是平衡二叉树呢？</strong></p>
<p>在内存比在磁盘的数据，查询效率快得多。如果树这种数据结构作为索引，那我们每查找一次数据就需要从磁盘中读取一个节点，也就是我们说的一个磁盘块，但是平衡二叉树可是每个节点只存储一个键值和数据的，如果是B树，可以存储更多的节点数据，树的高度也会降低，因此读取磁盘的次数 就降下来啦，查询效率就快啦。</p>
<p><strong>那为什么不是 B 树而是 B+树呢？</strong></p>
<ul>
<li>B+树非叶子节点上是不存储数据的，仅存储键值，而 B 树节点中不仅存储 键值，也会存储数据。innodb 中页的默认大小是 16KB，如果不存储数据，那 么就会存储更多的键值，相应的树的阶数（节点的子节点树）就会更大，树就会更矮更胖，如此一来我们查找数据进行磁盘的 IO 次数有会再次减少，数据查询的效率也会更快。</li>
<li>B+树索引的所有数据均存储在叶子节点，而且数据是按照顺序排列的，每个叶子节点连成一个双向链表。那么 B+树使得范围查找，排序查找，分组查找找变得简单，而B树需要通过索引不断的查询。</li>
<li>B+ 树有大量的冗余节点（所有非叶子节点都是冗余索引），这些冗余索引让 B+ 树在插入、删除的效率都更高，比如删除根节点的时候，不会像 B 树那样会发生复杂的树的变化；</li>
</ul>
<p>Hash索引</p>
<p>Hash索引：哈希索引就是采用一定的hash算法，将键值换算成新的hash值，映射到对应的槽位上，然后存储在hash表中。如果两个(或多个)键值，映射到一个相同的槽位上，他们就产生了hash冲突（也称为hash碰撞），可以通过链表来解决。</p>
<p>特点：A. Hash索引只能用于对等比较(&#x3D;，in)，不支持范围查询（between，&gt;，&lt; ，…）</p>
<p>B. 无法利用索引完成排序操作</p>
<p>C. 查询效率高，通常(不存在hash冲突的情况)只需要一次检索就可以了，效率通常要高于B+tree索引</p>
<h2 id="6-聚簇索引非聚簇索引"><a href="#6-聚簇索引非聚簇索引" class="headerlink" title="6. 聚簇索引非聚簇索引"></a>6. 聚簇索引非聚簇索引</h2><p>聚簇索引叶子节点存储的是行数据；而非聚簇索引叶子节点存储的是聚簇索引（通常是主键 ID）。</p>
<ul>
<li>如果没有主键，就选择第一个不包含 NULL 值的唯一列作为聚簇索引的索引键（key）；</li>
<li>在上面两个都没有的情况下，InnoDB 将自动生成一个隐式自增 id 列作为聚簇索引的索引键（key）；</li>
</ul>
<p>聚簇索引查询效率更高，而非聚簇索引需要进行回表查询，因此性能不如聚簇索引。</p>
<p>聚簇索引一般为主键索引，而主键一个表中只能有一个，因此聚簇索引一个表中也只能有一个，而非聚簇索引则没有数量上的限制。</p>
<h2 id="7-索引什么时候会失效"><a href="#7-索引什么时候会失效" class="headerlink" title="7. 索引什么时候会失效"></a>7. 索引什么时候会失效</h2><ul>
<li>联合索引，查询时的条件列不是联合索引中的第一个列，或者跳过中间某个索引时，索引失效。（最左前缀法则，因为有查询优化器，所以 a 字段在 where 子句的顺序并不重要）</li>
<li>索引字段上使用<code>（！= 或者 &lt; &gt;，not in）</code>时，可能会导致索引失效。尽量使用&gt;&#x3D;，&lt;&#x3D;,避免使用 &gt;,&lt;  </li>
<li>在索引列上使用 mysql 的内置函数，索引失效。</li>
<li>如果字段类型是字符串，<code>where</code>时一定用引号括起来，否则索引失效</li>
<li><code>like</code>通配符可能导致索引失效。如果仅仅是尾部模糊匹配，索引不会失效。如果是头部模糊匹配，索引失效。</li>
<li>查询条件包含<code>or</code>，可能导致索引失效。当or连接的条件，左右两侧字段都有索引时，索引才会生效。</li>
<li>对 索引列运算（如，<code>+、-、*、/</code>），索引失效。</li>
<li>索引字段上使用<code>is null， is not null</code>，可能导致索引失效。因为这和数据库的数据分布有关，如果全表扫描快，就走全表扫描，不走索引。</li>
<li>左连接查询或者右连接查询查询关联的字段编码格式不一样，可能导致索引失效。</li>
<li>mysql 估计使用全表扫描要比使用索引快,则不使用索引。</li>
</ul>
<h2 id="8-什么时候需要-不需要创建索引"><a href="#8-什么时候需要-不需要创建索引" class="headerlink" title="8. 什么时候需要&#x2F;不需要创建索引"></a>8. 什么时候需要&#x2F;不需要创建索引</h2><p>索引最大的好处是提高查询速度，但是索引也是有缺点的，比如：</p>
<ul>
<li>需要占用物理空间，数量越大，占用空间越大；</li>
<li>创建索引和维护索引要耗费时间，这种时间随着数据量的增加而增大；</li>
<li>会降低表的增删改的效率，因为每次增删改索引，B+ 树为了维护索引有序性，都需要进行动态维护。</li>
</ul>
<p>所以，索引不是万能钥匙，它也是根据场景来使用的。</p>
<h4 id="什么时候适用索引什么时候适用索引？"><a href="#什么时候适用索引什么时候适用索引？" class="headerlink" title="什么时候适用索引什么时候适用索引？"></a>什么时候适用索引什么时候适用索引？</h4><ul>
<li>字段有唯一性限制的，比如商品编码；</li>
<li>经常用于 <code>WHERE</code> 查询条件的字段，这样能够提高整个表的查询速度，如果查询条件不是一个字段，可以建立联合索引。</li>
<li>经常用于 <code>GROUP BY</code> 和 <code>ORDER BY</code> 的字段，这样在查询的时候就不需要再去做一次排序了，因为我们都已经知道了建立索引之后在 B+Tree 中的记录都是排序好的。</li>
</ul>
<h4 id="什么时候不需要创建索引？"><a href="#什么时候不需要创建索引？" class="headerlink" title="什么时候不需要创建索引？"></a>什么时候不需要创建索引？</h4><ul>
<li><code>WHERE</code> 条件，<code>GROUP BY</code>，<code>ORDER BY</code> 里用不到的字段，索引的价值是快速定位，如果起不到定位的字段通常是不需要创建索引的，因为索引是会占用物理空间的。</li>
<li>字段中存在大量重复数据，不需要创建索引，比如性别字段，只有男女，如果数据库表中，男女的记录分布均匀，那么无论搜索哪个值都可能得到一半的数据。在这些情况下，还不如不要索引，因为 MySQL 还有一个查询优化器，查询优化器发现某个值出现在表的数据行中的百分比很高的时候，它一般会忽略索引，进行全表扫描。</li>
<li>表数据太少的时候，不需要创建索引；</li>
<li>经常更新的字段不用创建索引，比如不要对电商项目的用户余额建立索引，因为索引字段频繁修改，由于要维护 B+Tree的有序性，那么就需要频繁的重建索引，这个过程是会影响数据库性能的。</li>
</ul>
<h2 id="9-有什么优化索引的方法？"><a href="#9-有什么优化索引的方法？" class="headerlink" title="9. 有什么优化索引的方法？"></a>9. 有什么优化索引的方法？</h2><h3 id="1-前缀索引优化"><a href="#1-前缀索引优化" class="headerlink" title="1. 前缀索引优化"></a>1. 前缀索引优化</h3><p>使用某个字段中字符串的前几个字符建立索引，使用前缀索引是为了减小索引字段大小，可以增加一个索引页中存储的索引值，有效提高索引的查询速度。在一些大字符串的字段作为索引时，使用前缀索引可以帮助我们减小索引项的大小。</p>
<p>不过，前缀索引有一定的局限性，例如：</p>
<ul>
<li>order by 就无法使用前缀索引；</li>
<li>无法把前缀索引用作覆盖索引；</li>
</ul>
<h3 id="2-覆盖索引优化"><a href="#2-覆盖索引优化" class="headerlink" title="2. 覆盖索引优化"></a>2. 覆盖索引优化</h3><p>覆盖索引是指 SQL 中 query 的所有字段，在索引 B+Tree 的叶子节点上都能找得到的那些索引，从二级索引中查询得到记录，而不需要通过聚簇索引查询获得，可以避免回表的操作。</p>
<h3 id="3-主键索引最好是自增的"><a href="#3-主键索引最好是自增的" class="headerlink" title="3. 主键索引最好是自增的"></a>3. 主键索引最好是自增的</h3><p><strong>如果我们使用自增主键</strong>，那么每次插入的新数据就会按顺序添加到当前索引节点的位置，不需要移动已有的数据，当页面写满，就会自动开辟一个新页面。因为每次插入一条新记录，都是追加操作，不需要重新移动数据，因此这种插入数据的方法效率非常高。</p>
<p><strong>如果我们使用非自增主键</strong>，由于每次插入主键的索引值都是随机的，因此每次插入新的数据时，就可能会插入到现有数据页中间的某个位置，这将不得不移动其它数据来满足新数据的插入，甚至需要从一个页面复制数据到另外一个页面，我们通常将这种情况称为页分裂。页分裂还有可能会造成大量的内存碎片，导致索引结构不紧凑，从而影响查询效率。</p>
<h3 id="4-索引最好设置为-NOT-NULL"><a href="#4-索引最好设置为-NOT-NULL" class="headerlink" title="4. 索引最好设置为 NOT NULL"></a>4. 索引最好设置为 NOT NULL</h3><p>为了更好的利用索引，索引列要设置为 NOT NULL 约束。有两个原因：</p>
<ul>
<li>第一原因：索引列存在 NULL 就会导致优化器在做索引选择的时候更加复杂，更加难以优化，因为可为 NULL 的列会使索引、索引统计和值比较都更复杂，比如进行索引统计时，count 会省略值为NULL 的行。</li>
<li>第二个原因：NULL 值是一个没意义的值，但是它会占用物理空间，所以会带来的存储空间的问题，因为 InnoDB 存储记录的时候，如果表中存在允许为 NULL 的字段，那么行格式中<strong>至少会用 1 字节空间存储 NULL 值列表</strong>。</li>
</ul>
<h3 id="5-防止索引失效"><a href="#5-防止索引失效" class="headerlink" title="5. 防止索引失效"></a>5. 防止索引失效</h3><h2 id="10-count-和-count-1-的区别？"><a href="#10-count-和-count-1-的区别？" class="headerlink" title="10. count(*) 和 count(1) 的区别？"></a>10. count(*) 和 count(1) 的区别？</h2><p>count() 是一个聚合函数，函数的参数不仅可以是字段名，也可以是其他任意表达式，该函数作用是统计符合查询条件的记录中，函数指定的参数不为 NULL 的记录有多少个。</p>
<p><strong>count(主键字段)的执行过程：</strong></p>
<p>如果表里只有主键索引，没有二级索引时，那么，InnoDB 循环遍历聚簇索引，将读取到的记录返回给 server 层，然后读取记录中的 id 值，就会 id 值判断是否为 NULL，如果不为 NULL，就将 count 变量加 1。</p>
<p>如果表里有二级索引时，InnoDB 循环遍历的对象就不是聚簇索引，而是二级索引。因为相同数量的二级索引记录可以比聚簇索引记录占用更少的存储空间，所以二级索引树比聚簇索引树小，这样遍历二级索引的 I&#x2F;O 成本比遍历聚簇索引的 I&#x2F;O 成本小，因此「优化器」优先选择的是二级索引。</p>
<p><strong>count(1)的执行过程：</strong></p>
<p>InnoDB 循环遍历聚簇索引（主键索引），将读取到的记录返回给 server 层，<strong>但是不会读取记录中的任何字段的值</strong>，因为 count 函数的参数是 1，不是字段，所以不需要读取记录中的字段值。参数 1 很明显并不是 NULL，因此 server 层每从 InnoDB 读取到一条记录，就将 count 变量加 1。</p>
<p>可以看到，count(1) 相比 count(主键字段) 少一个步骤，就是不需要读取记录中的字段值，所以通常会说 count(1) 执行效率会比 count(主键字段) 高一点。</p>
<p>但是，如果表里有二级索引时，InnoDB 循环遍历的对象就二级索引了。</p>
<p><strong>count(*)的执行过程：</strong></p>
<p>count(<code>\*</code>) 其实等于 count(<code>0</code>)，也就是说，当使用 count(<code>*</code>) 时，MySQL 会将 <code>*</code> 参数转化为参数 0 来处理。count(*) 执行过程跟 count(1) 执行过程基本一样的，性能没有什么差异。</p>
<p>而且 MySQL 会对 count(*) 和 count(1) 有个优化，如果有多个二级索引的时候，优化器会使用key_len 最小的二级索引进行扫描。</p>
<p>只有当没有二级索引的时候，才会采用主键索引来进行统计。</p>
<h2 id="11-MySQL事务，特性，问题，隔离级别等等"><a href="#11-MySQL事务，特性，问题，隔离级别等等" class="headerlink" title="11. MySQL事务，特性，问题，隔离级别等等"></a>11. MySQL事务，特性，问题，隔离级别等等</h2><p>事务的四大特征：原子性、一致性、隔离性、持久性。（ACID）</p>
<ul>
<li>原子性（Atomicity）：事务是不可分割的最小操作单元，要么全部成功，要么全部失败。</li>
<li>一致性（Consistency）：事务完成时，必须使所有的数据都保持一致状态。在事务开始之前和事务结束以后，数据库的完整性没有被破坏。</li>
<li>隔离性（Isolation）：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行。</li>
<li>持久性（Durability）：事务一旦提交或回滚，它对数据库中的数据的改变就是永久的。</li>
</ul>
<p>原子性是由undo log日志保证的，undolog记录了需要回滚的日志信息，事务回滚时撤销已经执行成功的sql。</p>
<p>一致性是由其他三大特征保证的。</p>
<p>隔离性是由MVCC来保证的。</p>
<p>持久性由内存、redo log来保证，mysql修改数据同时在内存和redolog记录这次操作，宕机的时候可以从redo log恢复。	</p>
<h2 id="12-并发事务问题：脏读、不可重复读、幻读"><a href="#12-并发事务问题：脏读、不可重复读、幻读" class="headerlink" title="12. 并发事务问题：脏读、不可重复读、幻读"></a>12. 并发事务问题：脏读、不可重复读、幻读</h2><p>（1）赃读：一个事务读到另外一个事务还没有提交的数据。比如B读取到了A未提交的数据。</p>
<p><img src="D:\MyBlog\source_posts\3-Mysql-md.assets\image-20230331143830964.png" alt="image-20230331143830964"></p>
<p>（2）不可重复读：一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读。</p>
<p><img src="D:\MyBlog\source_posts\3-Mysql-md.assets\image-20230331143849997.png" alt="image-20230331143849997"></p>
<p>（3）幻读：一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在，好像出现了 “幻影”。</p>
<p><img src="D:\MyBlog\source_posts\3-Mysql-md.assets\image-20230331145503345.png" alt="image-20230331145503345"></p>
<p>隔离级别：</p>
<table>
<thead>
<tr>
<th>隔离级别</th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody><tr>
<td>读未提交</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>读已提交</td>
<td>×</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>可重复读(Mysql默认)</td>
<td>×</td>
<td>×</td>
<td>√</td>
</tr>
<tr>
<td>序列化</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
</tbody></table>
<p>这四种隔离级别具体是如何实现的呢？</p>
<ul>
<li>对于「读未提交」隔离级别的事务来说，因为可以读到未提交事务修改的数据，所以直接读取最新的数据就好了；</li>
<li>对于「串行化」隔离级别的事务来说，通过加读写锁的方式来避免并行访问；</li>
<li>对于「读提交」和「可重复读」隔离级别的事务来说，它们是通过 <strong>Read View 来实现的，它们的区别在于创建 Read View 的时机不同，大家可以把 Read View 理解成一个数据快照，就像相机拍照那样，定格某一时刻的风景。「读提交」隔离级别是在「每个语句执行前」都会重新生成一个 Read View，而「可重复读」隔离级别是「启动事务时」生成一个 Read View，然后整个事务期间都在用这个 Read View</strong>。</li>
</ul>
<h2 id="12-可重复读是怎么解决的"><a href="#12-可重复读是怎么解决的" class="headerlink" title="12. 可重复读是怎么解决的"></a>12. 可重复读是怎么解决的</h2><ul>
<li>针对<strong>快照读</strong>（普通 select 语句），是<strong>通过 MVCC 方式解决了幻读</strong>，因为可重复读隔离级别下，事务执行过程中看到的数据，一直跟这个事务启动时看到的数据是一致的，即使中途有其他事务插入了一条数据，是查询不出来这条数据的，所以就很好了避免幻读问题。</li>
<li>针对<strong>当前读</strong>（select … for update 等语句），是<strong>通过 next-key lock（记录锁+间隙锁）方式解决了幻读</strong>，因为当执行 select … for update 语句的时候，会加上 next-key lock，如果有其他事务在 next-key lock 锁范围内插入了一条记录，那么这个插入语句就会被阻塞，无法成功插入，所以就很好了避免幻读问题。</li>
</ul>
<h2 id="13-MVCC-多版本并发控制"><a href="#13-MVCC-多版本并发控制" class="headerlink" title="13. MVCC 多版本并发控制"></a>13. MVCC 多版本并发控制</h2><p>事务每次开启前，都会从数据库获得一个<strong>自增长</strong>的事务 ID，可以从事务 ID 判断事务的执行先后顺序。这就是事务版本号。</p>
<p>对于 InnoDB 存储引擎，每一行记录都有两个隐藏列 <strong>trx_id</strong>、<strong>roll_pointer</strong>，如果表中没有主键和非 NULL 唯一键时，则还会有第三个隐藏的主键列 <strong>row_id</strong>。</p>
<p>undo log，<strong>回滚日志</strong>，用于记录数据被修改前的信息。在表记录修改之前，会先把数据拷贝到 undo log 里，如果事务回滚，即可以通过 undo log 来还原数据。</p>
<p>InnoDB 通过为每一行记录添加两个额外的隐藏的值来实现MVCC，这两个值一个记录这行数据何时被创建，另外一个记录这行数据何时过期（或者被删除）。但是InnoDB并不存储这些事件发生时的实际时间，它只存储这些事件发生时的系统版本号。这是一个随着事务的创建而不断增长的数字。每个事务在事务开始时会记录它自己的系统版本号。每个查询必须去检查每行数据的版本号与事务的版本号是否相同。<strong>这种通过「版本链」来控制并发事务访问同一个记录时的行为就叫 MVCC（多版本并发控制）。</strong></p>
<p>SELECT InnoDB必须每行数据来保证它符合两个条件</p>
<p>1、InnoDB必须找到一个行的版本，它至少要和事务的版本一样老(也即它的版本号不大于事务的版本号)。这保证了不管是事务开始之前，或者事务创建时，或者修改了这行数据的时候，这行数据是存在的。</p>
<p>2、这行数据的删除版本必须是未定义的或者比事务版本要大。这可以保证在事务开始之前这行数据没有被删除。</p>
<h2 id="14-查询一条记录，MVCC实现流程"><a href="#14-查询一条记录，MVCC实现流程" class="headerlink" title="14. 查询一条记录，MVCC实现流程"></a>14. 查询一条记录，MVCC实现流程</h2><ol>
<li>获取事务自己的版本号，即事务 ID</li>
<li>获取 Read View   (就是事务执行 SQL 语句时，产生的读视图,主要是用来做可见性判断的，即判断当前事务可见哪个版本的数据)</li>
<li>查询得到的数据，然后 Read View 中的事务版本号进行比较。</li>
<li>如果不符合 Read View 的可见性规则， 即就需要 Undo log 中历史快照;</li>
<li>最后返回符合规则的数据</li>
</ol>
<p>InnoDB 实现 MVCC，是通过<code>Read View+ Undo Log</code> 实现的，Undo Log 保存了历史快照，Read View 可见性规则帮助判断当前版本的数据是否可见。</p>
<h2 id="15-Mysql如何解决幻读"><a href="#15-Mysql如何解决幻读" class="headerlink" title="15. Mysql如何解决幻读"></a>15. Mysql如何解决幻读</h2><ul>
<li>针对<strong>快照读</strong>（普通 select 语句），是<strong>通过 MVCC 方式解决了幻读</strong>，因为可重复读隔离级别下，事务执行过程中看到的数据，一直跟这个事务启动时看到的数据是一致的，即使中途有其他事务插入了一条数据，是查询不出来这条数据的，所以就很好了避免幻读问题。</li>
<li>针对<strong>当前读</strong>（select … for update 等语句），是<strong>通过 next-key lock（记录锁+间隙锁）方式解决了幻读</strong>，因为当执行 select … for update 语句的时候，会加上 next-key lock，如果有其他事务在 next-key lock 锁范围内插入了一条记录，那么这个插入语句就会被阻塞，无法成功插入，所以就很好了避免幻读问题。</li>
</ul>
<h2 id="16-Sql语句的分类"><a href="#16-Sql语句的分类" class="headerlink" title="16. Sql语句的分类"></a>16. Sql语句的分类</h2><p>DDL（数据定义语言，用来定义数据库，表字段）</p>
<p>ALTER TABLE users ADD COLUMN gender VARCHAR(10);</p>
<p>DML（数据操作语言，用来对数据库表中的字段进行增删改操作）</p>
<p>DQL（数据查询语言，用来查询数据库中表的记录）</p>
<p>DCL（数据控制语言，用来管理数据库用户、控制数据库的访问权限）</p>
<h2 id="17-SQL中的聚合函数有哪些？"><a href="#17-SQL中的聚合函数有哪些？" class="headerlink" title="17. SQL中的聚合函数有哪些？"></a>17. SQL中的聚合函数有哪些？</h2><p>常见的聚合函数又COUNT()、AVG()、MAX()、MIN()</p>
<p>COUNT()函数：用于计算表中包含的行总数，count(*) 、count(1)表示总行数，不管列是否有值或者为空值。count(列名)计算指定列下的总行数，计算式忽略空值。</p>
<p>按照性能排：count(*) &#x3D; count(1) &gt; count(主键字段) &gt; count(字段)</p>
<h2 id="18-InnoDB引擎与MyISAM引擎的区别"><a href="#18-InnoDB引擎与MyISAM引擎的区别" class="headerlink" title="18. InnoDB引擎与MyISAM引擎的区别"></a>18. InnoDB引擎与MyISAM引擎的区别</h2><p>InnoDB是mysql5.5之后默认的存储引擎，之前的默认存储引擎是MyISAM</p>
<p>（1）InnoDB支持事务，而MyISAM不支持事务。  InnoDB把每条SQL都默认封装成事务，自动提交，影响速度。</p>
<p>（2）InnoDB支持行级锁，MyISAM不支持行级锁，只支持表锁</p>
<p>（3）InnoDB支持外键，MyISAM不支持外键</p>
<p>InnoDB引擎：</p>
<p>*.opt，用来存储当前数据库的默认字符集和字符校验规则。</p>
<p>*.frm ，该文件是用来保存每个表的元数据信息的，主要包含表结构定义。</p>
<p>*.ibd，表数据会保存在这个文件，包括索引。</p>
<p>MyISAM引擎：</p>
<p>.frm：存储表的元数据信息，包含表结构的定义</p>
<p>.MYD: 表真是数据文件</p>
<p>.MYI: 索引文件</p>
<h2 id="19-为什么MyISAM会比Innodb-的查询速度快"><a href="#19-为什么MyISAM会比Innodb-的查询速度快" class="headerlink" title="19. 为什么MyISAM会比Innodb 的查询速度快"></a>19. 为什么MyISAM会比Innodb 的查询速度快</h2><p>InnoDB 在做SELECT的时候，要维护的东西比MYISAM引擎多很多；</p>
<p>1）InnoDB 要缓存数据和索引，MyISAM只缓存索引块，这中间还有换进换出的减少</p>
<p>2）innodb寻址要映射到块，再到行，MyISAM记录的直接是文件的OFFSET，定位比INNODB要快</p>
<p>3）InnoDB 还需要维护MVCC一致；虽然你的场景没有，但他还是需要去检查和维护</p>
<h2 id="20-一个表中如果没有创建索引，还会创建B-树吗？"><a href="#20-一个表中如果没有创建索引，还会创建B-树吗？" class="headerlink" title="20. 一个表中如果没有创建索引，还会创建B+树吗？"></a>20. 一个表中如果没有创建索引，还会创建B+树吗？</h2><p>会 			如果有主键会创建聚簇索引、如果没有主键会生成rowid作为隐式主键</p>
<h2 id="21-为什么官方建议使用自增长主键作为索引？（说一下自增主键和字符串类型主键的区别和影响）"><a href="#21-为什么官方建议使用自增长主键作为索引？（说一下自增主键和字符串类型主键的区别和影响）" class="headerlink" title="21. 为什么官方建议使用自增长主键作为索引？（说一下自增主键和字符串类型主键的区别和影响）"></a>21. 为什么官方建议使用自增长主键作为索引？（说一下自增主键和字符串类型主键的区别和影响）</h2><ul>
<li>自增主键能够维持底层数据顺序写入</li>
<li>读取可以由b+树的二分查找定位</li>
<li>支持范围查找，范围数据自带顺序</li>
</ul>
<p>字符串无法完成以上操作</p>
<h2 id="22-索引下推"><a href="#22-索引下推" class="headerlink" title="22. 索引下推"></a>22. 索引下推</h2><p>5.6之前的版本是没有索引下推这个优化的</p>
<p>未开启索引下推：</p>
<ul>
<li>根据筛选条件在索引树中筛选第一个条件</li>
<li>获得结果集后回表操作</li>
<li>进行其他条件筛选</li>
<li>再次回表查询</li>
</ul>
<p>开启索引下推：在条件查询时，当前索引树如果满足全部筛选条件，可以在当前树中完成全部筛选过滤，得到比较小的结果集再进行回表操作。</p>
<p>例如查询张姓和10岁的所有信息：</p>
<p>select * from tuser where name like ‘张%’ and age&#x3D;10;</p>
<p>如果没有索引下推，就会先查询所有姓张的集合，然后逐一回表，去聚簇索引找到完整的行记录，再对age&#x3D;10进行筛选。</p>
<p>如果有索引下推，先找到姓张的集合，然后对age&#x3D;10进行过滤，最后进行回标。</p>
<h2 id="23-为什么要使用视图？-什么是视图？"><a href="#23-为什么要使用视图？-什么是视图？" class="headerlink" title="23.为什么要使用视图？ 什么是视图？"></a>23.为什么要使用视图？ 什么是视图？</h2><p>视图定义：<br>1、视图是一个虚表，是从一个或几个基本表（或视图）导出的表。<br>2、只存放视图的定义，不存放视图对应的数据。<br>3、基表中的数据发生变化，从视图中查询出的数据也随之改变。<br>视图的作用：<br>1、视图能够简化用户的操作<br>2、视图使用户能以多种角度看待同一数据<br>3、视图对重构数据库提供了一定程度的逻辑独立性<br>4、视图能够对机密数据提供安全保护<br>5、适当的利用视图可以更清晰的表达查询</p>
<p>142 什么是存储过程？有没有使用过？<br>项目中禁止使用存储过程，存储过程难以调试和扩展，更没有移植性</p>
<h2 id="24-SQL优化"><a href="#24-SQL优化" class="headerlink" title="24. SQL优化"></a>24. SQL优化</h2><ol>
<li>插入优化，批量插入数据，或者手动控制事务，按照主键顺序插入。</li>
</ol>
<h2 id="25-优化SQL查询速度"><a href="#25-优化SQL查询速度" class="headerlink" title="25. 优化SQL查询速度"></a>25. 优化SQL查询速度</h2><ol>
<li>适当使用索引，创建适当的索引可以大幅减少查询时间。</li>
<li>编写优化的SQL查询语句，避免不必要的子查询，多层嵌套查询，联合查询。</li>
<li>尽量不要全表扫描。避免使用通配符查询：通配符查询（如以 ‘%’ 开头模糊查询）往往无法使用索引，导致全表扫描。如果可能，尽量避免或限制通配符查询，或者考虑使用全文搜索引擎来优化模糊查询。</li>
<li>缓存查询结果：对于一些相对静态的查询结果，使用缓存技术，将查询结果缓存起来。这样可以避免重复执行相同的查询，提高响应速度。</li>
<li>合理拆分大型查询：对于复杂和庞大的查询，可以考虑将其拆分为更小的子查询或临时表，并使用合适的连接操作进行关联。这样可以避免一次性处理大量数据，提高查询的效率。</li>
<li>优化硬件和数据库配置：合理配置硬件资源和数据库参数也可以提高查询效率。例如，增加内存以提供更大的查询缓存，调整数据库的并发连接数、线程池大小等参数，以适应查询负载和并发需求。</li>
<li>预编译查询：对于重复执行的查询，可以考虑使用预编译查询或存储过程。预编译查询可以减少查询的解析和编译时间，提高查询效率</li>
</ol>
<h2 id="26-范式"><a href="#26-范式" class="headerlink" title="26. 范式"></a>26. 范式</h2><ul>
<li>第一范式：要求一张表的每个字段，设计时都必须具备原子性，即单个列只表示一个值，不可再分。</li>
<li>第二范式：要求一张表的所有字段，都必须依赖于主键，也就是一张表只能存同一个业务属性的字段。</li>
<li>第三范式：要求表中每一列数据不能与主键之外的字段有直接关系，也就是表中只允许一个主属性存在。</li>
</ul>
<h2 id="27-mysql中有那几种连接查询，左连接和右连接有什么区别？"><a href="#27-mysql中有那几种连接查询，左连接和右连接有什么区别？" class="headerlink" title="27.mysql中有那几种连接查询，左连接和右连接有什么区别？"></a>27.mysql中有那几种连接查询，左连接和右连接有什么区别？</h2><ol>
<li>内连接（INNER JOIN）：<ul>
<li>内连接返回两个表中匹配的行，即只返回两个表中连接字段匹配的记录。</li>
<li>内连接使用 ON 或 WHERE 子句来指定连接条件。</li>
<li>内连接的结果集只包含满足连接条件的行。</li>
</ul>
</li>
<li>左连接（LEFT JOIN）：<ul>
<li>左连接返回左表中的所有行，以及右表中与左表匹配的行。</li>
<li>如果右表中没有匹配的行，则右表返回 NULL 值。</li>
<li>左连接使用 ON 或 WHERE 子句来指定连接条件。</li>
</ul>
</li>
<li>右连接（RIGHT JOIN）：<ul>
<li>右连接返回右表中的所有行，以及左表中与右表匹配的行。</li>
<li>如果左表中没有匹配的行，则左表返回 NULL 值。</li>
<li>右连接使用 ON 或 WHERE 子句来指定连接条件。</li>
</ul>
</li>
</ol>
<p>左连接和右连接的区别在于返回的结果集中哪个表的所有行会被包含：</p>
<ul>
<li>左连接返回左表的所有行和右表与左表匹配的行，右表中没有匹配的行则返回 NULL 值。</li>
<li>右连接返回右表的所有行和左表与右表匹配的行，左表中没有匹配的行则返回 NULL 值。</li>
</ul>
<p>简单来说，左连接以左表为基准，返回左表的所有行，同时返回与左表匹配的右表行；右连接以右表为基准，返回右表的所有行，同时返回与右表匹配的左表行。</p>
<h2 id="28-truncate、delete-和-drop-删除语句区别"><a href="#28-truncate、delete-和-drop-删除语句区别" class="headerlink" title="28. truncate、delete 和 drop 删除语句区别"></a>28. truncate、delete 和 drop 删除语句区别</h2><table>
<thead>
<tr>
<th align="left">区别点</th>
<th>drop</th>
<th>truncate</th>
<th>delete</th>
</tr>
</thead>
<tbody><tr>
<td align="left">执行速度</td>
<td>最快</td>
<td>较快</td>
<td>慢</td>
</tr>
<tr>
<td align="left">命令分类</td>
<td>DDL（数据定义语言）不可以回滚</td>
<td>DDL（数据定义语言）不可以回滚</td>
<td>DML（数据操作语言）可以回滚</td>
</tr>
<tr>
<td align="left">删除对象</td>
<td>删除整张表，包括索引、约束、触发器</td>
<td>只删除表数据，表结构，索引、约束等会保留</td>
<td>只删除表的全部数据或者部分数据，表结构、索引、约束等会保留</td>
</tr>
<tr>
<td align="left">删除条件</td>
<td>不能用</td>
<td>不能用</td>
<td>可以用where</td>
</tr>
<tr>
<td align="left">回滚</td>
<td>不可回滚</td>
<td>不可回滚</td>
<td>可回滚</td>
</tr>
<tr>
<td align="left">自增初始值</td>
<td>-</td>
<td>重置</td>
<td>不重置</td>
</tr>
</tbody></table>
<h2 id="18-设计数据库相关"><a href="#18-设计数据库相关" class="headerlink" title="18. 设计数据库相关"></a>18. 设计数据库相关</h2><p>再问一下你们项目一般选什么字段作为主键？</p>
<p><strong>我</strong>：通常会选一个数值类型、且具备顺序递增特性的字段作为主键，如果表中没有符合条件的字段，则通常会额外设计一个跟业务无关的<code>ID</code>字段作为主键。</p>
<p><strong>面试官</strong>：哦？为什么宁愿额外设计也不从表中选择其他字段呢？</p>
<p><strong>我</strong>：这主要是为了维护索引的树结构，如果选择值无序的字段作为索引键，这绝对会造成索引树频繁的发生分裂，从而导致索引的性能下降。</p>
<p><strong>面试官</strong>：嗯哼？为什么索引树分裂会导致性能下降呢？而顺序自增又能维护树结构呢？</p>
<p><strong>我内心</strong>：……，希望你除开嘴上一口一个<code>B</code>树的问之外，心里最好也要有个<code>B</code>树。</p>
<p><strong>我</strong>：因为当一个叶子节点存满后，此时又新增一个新的值，也要插入到这个节点中，那么该节点中的最后一个数据只能往后面的节点移动，而后面的节点又需要继续往后移动，最终才能给新增的值腾出位置。</p>
<p><strong>我</strong>：因为这个过程索引树的结构在发生变更，所以会加锁防止其他事务读到不对的数据。而挪动数据、加锁阻塞都需要时间，因此树分裂会导致索引下降。</p>
<p><strong>我</strong>：但如果选择按序递增的字段就不会有这个问题，毕竟每次新增的值，都会直接放到最后面去插入，并不会导致树结构发生分裂。</p>
<p>存储过程</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://wangfei0928.github.io/oldArtist.github.io">王斐</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://wangfei0928.github.io/oldArtist.github.io/2023/12/18/3-Mysql-md/">https://wangfei0928.github.io/oldArtist.github.io/2023/12/18/3-Mysql-md/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>Sponsor</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/oldArtist.github.io/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/oldArtist.github.io/img/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/oldArtist.github.io/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/oldArtist.github.io/img/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/oldArtist.github.io/2023/12/18/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">Hello World</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/oldArtist.github.io/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">王斐</div><div class="author-info__description">纵有疾风起，人生不言弃</div></div><div class="card-info-data site-data is-center"><a href="/oldArtist.github.io/archives/"><div class="headline">Articles</div><div class="length-num">2</div></a><a href="/oldArtist.github.io/tags/"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/oldArtist.github.io/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySql"><span class="toc-number">1.</span> <span class="toc-text">MySql</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%89%A7%E8%A1%8C-select-%E8%AF%AD%E5%8F%A5%E9%83%BD%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">1. 执行 select 语句都发生了什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-MySQL-%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E6%94%BE%E5%9C%A8%E5%93%AA%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">2. MySQL 的数据存放在哪？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-MySQL%E7%9A%84NULL%E5%80%BC%E5%A6%82%E4%BD%95%E5%AD%98%E6%94%BE%EF%BC%9F"><span class="toc-number">1.3.</span> <span class="toc-text">3. MySQL的NULL值如何存放？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%B0%88%E4%B8%80%E8%B0%88MySQL%E7%B4%A2%E5%BC%95"><span class="toc-number">1.4.</span> <span class="toc-text">4.  谈一谈MySQL索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-B%E6%A0%91B-%E6%A0%91"><span class="toc-number">1.5.</span> <span class="toc-text">5. B树B+树</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95"><span class="toc-number">1.6.</span> <span class="toc-text">6. 聚簇索引非聚簇索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%B4%A2%E5%BC%95%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E5%A4%B1%E6%95%88"><span class="toc-number">1.7.</span> <span class="toc-text">7. 索引什么时候会失效</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E9%9C%80%E8%A6%81-%E4%B8%8D%E9%9C%80%E8%A6%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">1.8.</span> <span class="toc-text">8. 什么时候需要&#x2F;不需要创建索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E9%80%82%E7%94%A8%E7%B4%A2%E5%BC%95%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E9%80%82%E7%94%A8%E7%B4%A2%E5%BC%95%EF%BC%9F"><span class="toc-number">1.8.0.1.</span> <span class="toc-text">什么时候适用索引什么时候适用索引？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%B8%8D%E9%9C%80%E8%A6%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%EF%BC%9F"><span class="toc-number">1.8.0.2.</span> <span class="toc-text">什么时候不需要创建索引？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E6%9C%89%E4%BB%80%E4%B9%88%E4%BC%98%E5%8C%96%E7%B4%A2%E5%BC%95%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9F"><span class="toc-number">1.9.</span> <span class="toc-text">9. 有什么优化索引的方法？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%89%8D%E7%BC%80%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96"><span class="toc-number">1.9.1.</span> <span class="toc-text">1. 前缀索引优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%A6%86%E7%9B%96%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96"><span class="toc-number">1.9.2.</span> <span class="toc-text">2. 覆盖索引优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%B8%BB%E9%94%AE%E7%B4%A2%E5%BC%95%E6%9C%80%E5%A5%BD%E6%98%AF%E8%87%AA%E5%A2%9E%E7%9A%84"><span class="toc-number">1.9.3.</span> <span class="toc-text">3. 主键索引最好是自增的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%B4%A2%E5%BC%95%E6%9C%80%E5%A5%BD%E8%AE%BE%E7%BD%AE%E4%B8%BA-NOT-NULL"><span class="toc-number">1.9.4.</span> <span class="toc-text">4. 索引最好设置为 NOT NULL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E9%98%B2%E6%AD%A2%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88"><span class="toc-number">1.9.5.</span> <span class="toc-text">5. 防止索引失效</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-count-%E5%92%8C-count-1-%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">1.10.</span> <span class="toc-text">10. count(*) 和 count(1) 的区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-MySQL%E4%BA%8B%E5%8A%A1%EF%BC%8C%E7%89%B9%E6%80%A7%EF%BC%8C%E9%97%AE%E9%A2%98%EF%BC%8C%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E7%AD%89%E7%AD%89"><span class="toc-number">1.11.</span> <span class="toc-text">11. MySQL事务，特性，问题，隔离级别等等</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%B9%B6%E5%8F%91%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98%EF%BC%9A%E8%84%8F%E8%AF%BB%E3%80%81%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E3%80%81%E5%B9%BB%E8%AF%BB"><span class="toc-number">1.12.</span> <span class="toc-text">12. 并发事务问题：脏读、不可重复读、幻读</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%E6%98%AF%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%E7%9A%84"><span class="toc-number">1.13.</span> <span class="toc-text">12. 可重复读是怎么解决的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-MVCC-%E5%A4%9A%E7%89%88%E6%9C%AC%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6"><span class="toc-number">1.14.</span> <span class="toc-text">13. MVCC 多版本并发控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E6%9F%A5%E8%AF%A2%E4%B8%80%E6%9D%A1%E8%AE%B0%E5%BD%95%EF%BC%8CMVCC%E5%AE%9E%E7%8E%B0%E6%B5%81%E7%A8%8B"><span class="toc-number">1.15.</span> <span class="toc-text">14. 查询一条记录，MVCC实现流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-Mysql%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%B9%BB%E8%AF%BB"><span class="toc-number">1.16.</span> <span class="toc-text">15. Mysql如何解决幻读</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-Sql%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.17.</span> <span class="toc-text">16. Sql语句的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-SQL%E4%B8%AD%E7%9A%84%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">1.18.</span> <span class="toc-text">17. SQL中的聚合函数有哪些？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-InnoDB%E5%BC%95%E6%93%8E%E4%B8%8EMyISAM%E5%BC%95%E6%93%8E%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.19.</span> <span class="toc-text">18. InnoDB引擎与MyISAM引擎的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-%E4%B8%BA%E4%BB%80%E4%B9%88MyISAM%E4%BC%9A%E6%AF%94Innodb-%E7%9A%84%E6%9F%A5%E8%AF%A2%E9%80%9F%E5%BA%A6%E5%BF%AB"><span class="toc-number">1.20.</span> <span class="toc-text">19. 为什么MyISAM会比Innodb 的查询速度快</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-%E4%B8%80%E4%B8%AA%E8%A1%A8%E4%B8%AD%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%EF%BC%8C%E8%BF%98%E4%BC%9A%E5%88%9B%E5%BB%BAB-%E6%A0%91%E5%90%97%EF%BC%9F"><span class="toc-number">1.21.</span> <span class="toc-text">20. 一个表中如果没有创建索引，还会创建B+树吗？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AE%98%E6%96%B9%E5%BB%BA%E8%AE%AE%E4%BD%BF%E7%94%A8%E8%87%AA%E5%A2%9E%E9%95%BF%E4%B8%BB%E9%94%AE%E4%BD%9C%E4%B8%BA%E7%B4%A2%E5%BC%95%EF%BC%9F%EF%BC%88%E8%AF%B4%E4%B8%80%E4%B8%8B%E8%87%AA%E5%A2%9E%E4%B8%BB%E9%94%AE%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B%E4%B8%BB%E9%94%AE%E7%9A%84%E5%8C%BA%E5%88%AB%E5%92%8C%E5%BD%B1%E5%93%8D%EF%BC%89"><span class="toc-number">1.22.</span> <span class="toc-text">21. 为什么官方建议使用自增长主键作为索引？（说一下自增主键和字符串类型主键的区别和影响）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-%E7%B4%A2%E5%BC%95%E4%B8%8B%E6%8E%A8"><span class="toc-number">1.23.</span> <span class="toc-text">22. 索引下推</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE%EF%BC%9F-%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%86%E5%9B%BE%EF%BC%9F"><span class="toc-number">1.24.</span> <span class="toc-text">23.为什么要使用视图？ 什么是视图？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-SQL%E4%BC%98%E5%8C%96"><span class="toc-number">1.25.</span> <span class="toc-text">24. SQL优化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-%E4%BC%98%E5%8C%96SQL%E6%9F%A5%E8%AF%A2%E9%80%9F%E5%BA%A6"><span class="toc-number">1.26.</span> <span class="toc-text">25. 优化SQL查询速度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-%E8%8C%83%E5%BC%8F"><span class="toc-number">1.27.</span> <span class="toc-text">26. 范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-mysql%E4%B8%AD%E6%9C%89%E9%82%A3%E5%87%A0%E7%A7%8D%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%B7%A6%E8%BF%9E%E6%8E%A5%E5%92%8C%E5%8F%B3%E8%BF%9E%E6%8E%A5%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">1.28.</span> <span class="toc-text">27.mysql中有那几种连接查询，左连接和右连接有什么区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#28-truncate%E3%80%81delete-%E5%92%8C-drop-%E5%88%A0%E9%99%A4%E8%AF%AD%E5%8F%A5%E5%8C%BA%E5%88%AB"><span class="toc-number">1.29.</span> <span class="toc-text">28. truncate、delete 和 drop 删除语句区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-%E8%AE%BE%E8%AE%A1%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3"><span class="toc-number">1.30.</span> <span class="toc-text">18. 设计数据库相关</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/oldArtist.github.io/2023/12/18/3-Mysql-md/" title="3.Mysql.md">3.Mysql.md</a><time datetime="2023-12-18T13:02:16.000Z" title="Created 2023-12-18 21:02:16">2023-12-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/oldArtist.github.io/2023/12/18/hello-world/" title="Hello World">Hello World</a><time datetime="2023-12-18T11:38:57.849Z" title="Created 2023-12-18 19:38:57">2023-12-18</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 王斐</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/oldArtist.github.io/js/utils.js"></script><script src="/oldArtist.github.io/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/oldArtist.github.io/js/search/local-search.js"></script></div></div></body></html>